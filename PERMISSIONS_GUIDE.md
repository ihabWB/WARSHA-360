# ูุธุงู ุงูุตูุงุญูุงุช ุงููุชุนุฏุฏ - ุฏููู ุงูุงุณุชุฎุฏุงู ุงููุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุตูุงุญูุงุช ูุชุนุฏุฏ ุงููุณุชุฎุฏููู ูุณูุญ ูุดุฑูุฉ ูุงุญุฏุฉ ุจุฅุถุงูุฉ ุนุฏุฉ ููุธููู ุจุตูุงุญูุงุช ูุฎุชููุฉ.

---

## ๐๏ธ ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ูู Supabase SQL Editorุ ููุฐ ุงูุฃูุงูุฑ ุงูุชุงููุฉ:

```sql
-- ูุณุฎ ูุญุชูู ููู: supabase-permissions-schema.sql
```

ูุฐุง ุณููุดุฆ 3 ุฌุฏุงูู ุฌุฏูุฏุฉ:
- `user_roles` - ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- `pending_invitations` - ุงูุฏุนูุงุช ุงููุนููุฉ
- `audit_log` - ุณุฌู ุงูุชุฏููู (ุงุฎุชูุงุฑู)

---

## ๐ฅ ุงูุฎุทูุฉ 2: ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ:

| ุงูุฏูุฑ | ุงููุตู | ุงูุตูุงุญูุงุช ุงูุฑุฆูุณูุฉ |
|------|-------|---------------------|
| **Owner** (ูุงูู) | ุตุงุญุจ ุงูุญุณุงุจ ุงูุฃุณุงุณู | ูู ุดูุก + ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู |
| **Admin** (ูุฏูุฑ) | ูุฏูุฑ ุนุงู | ูู ุดูุก ูุง ุนุฏุง ุญุฐู ุงููุฏููุนุงุช ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู |
| **Accountant** (ูุญุงุณุจ) | ูุณุคูู ูุงูู | ุงููุฏููุนุงุชุ ุงูุดููุงุชุ ุงูุญุณุงุจุงุชุ ุงูุชูุงุฑูุฑ |
| **Data Entry** (ูุฏุฎู ุจูุงูุงุช) | ููุธู ุฅุฏุฎุงู | ุฅุถุงูุฉ/ุชุนุฏูู ุงูุนูุงูุ ุงููุดุงุฑูุนุ ุงูููููุงุช |
| **Viewer** (ูุดุงูุฏ) | ูุฑุงุกุฉ ููุท | ุนุฑุถ ูู ุดูุก ุจุฏูู ุชุนุฏูู |

### ุงูุตูุงุญูุงุช ุงูุชูุตูููุฉ ููู ุฏูุฑ:

#### Owner (ูุงูู):
```json
{
  "workers": {"create": true, "read": true, "update": true, "delete": true},
  "projects": {"create": true, "read": true, "update": true, "delete": true},
  "payments": {"create": true, "read": true, "update": true, "delete": true},
  "settings": {"manage_users": true, "manage_permissions": true}
}
```

#### Accountant (ูุญุงุณุจ):
```json
{
  "workers": {"create": false, "read": true, "update": false, "delete": false},
  "payments": {"create": true, "read": true, "update": true, "delete": false},
  "reports": {"read": true, "export": true}
}
```

#### Data Entry (ูุฏุฎู ุจูุงูุงุช):
```json
{
  "workers": {"create": true, "read": true, "update": true, "delete": false},
  "daily_records": {"create": true, "read": true, "update": true, "delete": false},
  "payments": {"create": false, "read": true, "update": false, "delete": false}
}
```

---

## ๐ ุงูุฎุทูุฉ 3: ุงุณุชุฎุฏุงู ุงููุธุงู

### ุฃ) ุงููุงูู ูุฏุนู ููุธู ุฌุฏูุฏ:

1. **ุงูุชุญ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**:
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ โ "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู" ๐ฅ

2. **ุงุถุบุท "ุฏุนูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ"**

3. **ุงููุฃ ุงูุจูุงูุงุช**:
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุธู
   - ุงุฎุชุฑ ุงูุฏูุฑ (ูุฏูุฑุ ูุญุงุณุจุ ูุฏุฎู ุจูุงูุงุชุ ุฃู ูุดุงูุฏ)

4. **ุงุถุบุท "ุฅุฑุณุงู ุงูุฏุนูุฉ"**

5. **ุงูุณุฎ ุฑุงุจุท ุงูุฏุนูุฉ** ูุฃุฑุณูู ููููุธู
   - ูุซุงู: `https://warsha-360.web.app/#/accept-invitation?token=xxx`
   - ุงูุฑุงุจุท ุตุงูุญ ููุฏุฉ 7 ุฃูุงู

### ุจ) ุงูููุธู ููุจู ุงูุฏุนูุฉ:

1. **ุงูููุธู ููุชุญ ุฑุงุจุท ุงูุฏุนูุฉ**

2. **ุฅุฐุง ูู ููู ูุฏูู ุญุณุงุจ**:
   - ูุถุบุท "ุชุณุฌูู ุงูุฏุฎูู"
   - ููุดุฆ ุญุณุงุจ Firebase ุฌุฏูุฏ

3. **ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู**:
   - ูููุจู ุงูุฏุนูุฉ ุชููุงุฆูุงู
   - ูููุฌู ุฅูู ุตูุญุฉ ุงุฎุชูุงุฑ ุงูููุงูู
   - ูุฌุฏ ุงูููุงูู ุงูุฐู ุฏูุนู ุฅููู ูู ุงููุงุฆูุฉ

4. **ูุจุฏุฃ ุงูุนูู** ุจุงูุตูุงุญูุงุช ุงููุญุฏุฏุฉ ูู

---

## ๐ ุงูุฎุทูุฉ 4: ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

### ุนุฑุถ ุงููุณุชุฎุฏููู ุงููุดุทูู:

- **ุงูุตูุญุฉ**: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- **ูุนุฑุถ**:
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - ุงูุฏูุฑ
  - ุชุงุฑูุฎ ุงูุฅุถุงูุฉ
  - ุงูุญุงูุฉ (ูุดุท/ููููู)

### ุฅูุบุงุก ุตูุงุญูุฉ ูุณุชุฎุฏู:

1. ูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู"
2. ุงุถุบุท โ ุจุฌุงูุจ ุงููุณุชุฎุฏู
3. ุชุฃููุฏ ุงูุฅูุบุงุก
4. **ุงููุชูุฌุฉ**: ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุงููุตูู ููุฐุง ุงูููุงูู ุจุนุฏ ุงูุขู

### ุฅูุบุงุก ุฏุนูุฉ ูุนููุฉ:

1. ูู ูุณู "ุงูุฏุนูุงุช ุงููุนููุฉ"
2. ุงุถุบุท ๐๏ธ ุจุฌุงูุจ ุงูุฏุนูุฉ
3. ุงูุฏุนูุฉ ุชููุบู ููู ุชุนูู ุจุนุฏ ุฐูู

---

## ๐ง ุงูุฎุทูุฉ 5: ุฅุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)

### ุงุณุชุฎุฏุงู EmailJS (ูุฌุงูู):

1. **ุฅูุดุงุก ุญุณุงุจ**:
   - ุงุฐูุจ ุฅูู: https://www.emailjs.com/
   - ุฃูุดุฆ ุญุณุงุจ ูุฌุงูู

2. **ุฑุจุท ุงูุจุฑูุฏ**:
   - ุงุฎุชุฑ ุฎุฏูุฉ ุงูุจุฑูุฏ (Gmail, Outlook, ุฅูุฎ)
   - ุงุชุจุน ุงูุชุนูููุงุช ููุฑุจุท

3. **ุฅูุดุงุก ูุงูุจ**:
   - ูู Dashboard โ Email Templates
   - ุฃูุดุฆ ูุงูุจ ุฌุฏูุฏ ุจุงููุญุชูู ุงูุชุงูู:

```
Subject: ุฏุนูุฉ ููุงูุถูุงู ุฅูู {{kablan_name}} ูู ูุฑุดุงุชู

ูุฑุญุจุงู {{to_name}},

ููุฏ ุชูุช ุฏุนูุชู ูู ูุจู {{from_name}} ููุงูุถูุงู ุฅูู {{kablan_name}} ูู ูุธุงู ูุฑุดุงุชู.

ุฏูุฑู: {{role}}

ูููุจูู ุงูุฏุนูุฉุ ูุฑุฌู ุงูููุฑ ุนูู ุงูุฑุงุจุท ุงูุชุงูู:
{{invitation_link}}

ููุงุญุธุฉ: ูุฐุง ุงูุฑุงุจุท ุตุงูุญ ููุฏุฉ {{expiry_days}} ุฃูุงู.

ูุน ุฃุทูุจ ุงูุชุญูุงุช,
ูุฑูู ูุฑุดุงุชู
```

4. **ุงุญุตู ุนูู ุงููุนุฑูุงุช**:
   - Service ID
   - Template ID  
   - Public Key

5. **ุฃุถููุง ูู `.env.local`**:
```env
VITE_EMAILJS_SERVICE_ID=service_xxx
VITE_EMAILJS_TEMPLATE_ID=template_xxx
VITE_EMAILJS_PUBLIC_KEY=xxx
```

6. **ุฃุนุฏ ุจูุงุก ุงููุดุฑูุน**:
```bash
npm run build
firebase deploy
```

ุงูุขู ุงูุฏุนูุงุช ุณุชูุฑุณู ุชููุงุฆูุงู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู!

---

## ๐ก๏ธ ุงูุฎุทูุฉ 6: ุญูุงูุฉ ุงูุตูุญุงุช (ุชููุงุฆู)

ุงููุธุงู ูุญูู ุฌููุน ุงูุตูุญุงุช ุชููุงุฆูุงู:

### โ ูุง ุชู ุชุทุจููู:

1. **ูุญุต ุงูุตูุงุญูุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ**
2. **ุฅุฎูุงุก ุงูุฃุฒุฑุงุฑ** ุงูุชู ูุง ูููู ุงููุณุชุฎุฏู ุตูุงุญูุฉ ููุง
3. **ููุน ุงูุนูููุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง**
4. **ุฑุณุงุฆู ูุงุถุญุฉ** ุนูุฏ ูุญุงููุฉ ุงููุตูู ููุญุชูู ูุญุธูุฑ

### ูุซุงู ุนูู ุงูุญูุงูุฉ:

```typescript
// ูุฏุฎู ุงูุจูุงูุงุช ูุฑู:
- ุฒุฑ "ุฅุถุงูุฉ ุนุงูู" โ
- ุฒุฑ "ุชุนุฏูู ุนุงูู" โ
- ุฒุฑ "ุญุฐู ุนุงูู" โ (ูุฎูู)

// ุงููุญุงุณุจ ูุฑู:
- ุฒุฑ "ุฅุถุงูุฉ ุฏูุนุฉ" โ
- ุฒุฑ "ุญุฐู ุฏูุนุฉ" โ (ูุฎูู)
- ุฒุฑ "ุชุตุฏูุฑ ุชูุฑูุฑ" โ
```

---

## ๐ ุงูุฎุทูุฉ 7: ุณุฌู ุงูุชุฏููู (Audit Log)

### ุชูุนูู ุณุฌู ุงูุชุฏููู:

ุณุฌู ุงูุชุฏููู ูุณุฌู ุชููุงุฆูุงู:
- ูู ูุงู ุจุงูุนูููุฉ (user_id)
- ููุน ุงูุนูููุฉ (create, update, delete)
- ุนูู ูุงุฐุง (workers, payments, etc.)
- ูุชู (timestamp)
- ูู ุฃูู (IP address - ุงุฎุชูุงุฑู)

### ุงูุงุณุชุนูุงู ุนู ุงูุณุฌู:

```sql
-- ุนุฑุถ ุขุฎุฑ 100 ุนูููุฉ
SELECT * FROM audit_log 
WHERE kablan_id = 'your-kablan-id'
ORDER BY created_at DESC
LIMIT 100;

-- ุนุฑุถ ุนูููุงุช ูุณุชุฎุฏู ูุนูู
SELECT * FROM audit_log 
WHERE user_id = 'user-firebase-uid'
ORDER BY created_at DESC;

-- ุนุฑุถ ุนูููุงุช ุงูุญุฐู ููุท
SELECT * FROM audit_log 
WHERE action = 'delete'
ORDER BY created_at DESC;
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "ููุณ ูุฏูู ุตูุงุญูุฉ"

**ุงูุญู**:
1. ุชุญูู ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุญุฏุซุฉ
2. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู user_role
3. ุงูุญุต ุงูุตูุงุญูุงุช ูู ุฌุฏูู user_roles

### ุงููุดููุฉ: "ุฑุงุจุท ุงูุฏุนูุฉ ุบูุฑ ุตุงูุญ"

**ุงูุญู**:
1. ุชุญูู ุฃู ุงูุฑุงุจุท ูุงูู
2. ุชุฃูุฏ ุฃู ุงูุฏุนูุฉ ูู ุชูุชูู ุตูุงุญูุชูุง (7 ุฃูุงู)
3. ุชุญูู ุฃู ุงูุฏุนูุฉ ูู ุชููุบู

### ุงููุดููุฉ: ุงูููุธู ูุง ูุฑู ุงูููุงูู

**ุงูุญู**:
1. ุชุฃูุฏ ุฃู ุงูุฏุนูุฉ ููุจูุช ุจูุฌุงุญ
2. ุชุญูู ูู ุฌุฏูู user_roles ุฃู ุงูุณุฌู ููุฌูุฏ
3. ุชุฃูุฏ ุฃู status = 'active'

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

### 1. ุงูุฃูุงู:
- โ ูู ููุธู ูู ุญุณุงุจ Firebase ูููุตู
- โ ุงูุตูุงุญูุงุช ูุทุจูุฉ ุนูู ูุณุชูู ุงูุชุทุจูู ูุงููุงุฌูุฉ
- โ๏ธ **ููู**: ูุง ุชูุณู ุชุทุจูู ููุณ ุงููุญุต ุนูู ูุณุชูู API/Backend

### 2. ุงูุฏุนูุงุช:
- ุชูุชูู ุตูุงุญูุชูุง ุจุนุฏ 7 ุฃูุงู
- ูููู ุฅูุบุงุคูุง ูู ุฃู ููุช
- ุฑุงุจุท ูุงุญุฏ ููู ุฏุนูุฉ

### 3. ุงูุฃุฏูุงุฑ:
- ูููู ุชุนุฏูู ุฏูุฑ ุงููุณุชุฎุฏู ูู ุฃู ููุช
- ูุง ูููู ุฅุถุงูุฉ ุฃูุซุฑ ูู owner ูุงุญุฏ
- Owner ุงูุฃุตูู ูุง ูููู ุญุฐูู

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

### ููุชุญุณูู:
1. โจ ุฅุถุงูุฉ ุตูุญุฉ ูุนุฑุถ ุณุฌู ุงูุชุฏููู
2. ๐ ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ูุดุงุท ุงููุณุชุฎุฏููู
3. ๐ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงูุตูุงุญูุงุช
4. ๐ง ุชุญุณูู ููุงูุจ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
5. ๐จ ุชุฎุตูุต ุงูุตูุงุญูุงุช ููู ูุณุชุฎุฏู ุนูู ุญุฏุฉ

---

## ๐ ุงูุฏุนู

ูู ุญุงู ูุฌูุฏ ูุดุงูู:
1. ุชุญูู ูู Console (F12) ููุฃุฎุทุงุก
2. ุงูุญุต ุฌุฏูู user_roles ูู Supabase
3. ุชุฃูุฏ ูู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุฑุงุฌุน ูุฐุง ุงูุฏููู

---

โ **ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**

ุงููููุน ุงููุจุงุดุฑ: https://warsha-360.web.app
